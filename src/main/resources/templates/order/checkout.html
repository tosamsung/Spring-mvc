<!DOCTYPE html>
<html
  xmlns:th="http://www.thymeleaf.org"
  th:replace="~{/layout/index :: dynamic(~{::main})}"
>
  <body>
    <main>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css">
		<div class="container">
			<div class="contentbar">
				<!-- Start row -->
				<div class="row">
					<!-- Start col -->
					<div class="col-md-12 col-lg-12 col-xl-12">
						<div class="card m-b-30">
							<div class="card-header">
								<h5 class="card-title">Cart</h5>
							</div>
							<div class="card-body">
								<div class="row justify-content-center">
									<div class="col-lg-12 col-xl-10">
										<div class="cart-container"  ng-if="cart.items.length > 0">
											<div class="cart-head">
												<div class="table-responsive">
													<table class="table table-borderless">
														<thead>
															<tr>
																<th scope="col">Photo</th>
																<th scope="col">Product</th>
																<th scope="col">Qty</th>
																<th scope="col">Price</th>
																<th scope="col" class="text-right">Total</th>
																<th scope="col">Action</th>
															</tr>
														</thead>
														<tbody>
															<tr ng-repeat="item in cart.items">

																<td><img th:src="@{|/assets/images/{{item.image}}|}"
																		class="img-fluid" width="35" alt="product"></td>
																<td>{{item.name}}</td>
																<td>
																	<div class="form-group mb-0">
																		<input type="number" ng-change="cart.saveToLocalStorage()" ng-model="item.qty" min="1"
																			class="form-control cart-qty">
																	</div>
																</td>
																<td>${{item.price}}</td>
																<td class="text-right">${{item.price * item.qty}}</td>
																<td><button style="border: none;" ng-click="cart.remove(item.id)" class="text-danger"><i
																			class="ri-delete-bin-3-line"></i></button></td>
															</tr>

														</tbody>
													</table>
												</div>
											</div>
											<div class="cart-body">
												<div class="row">
													<div style="margin-left: 550px;"
														class="col-md-12 order-1 order-lg-2 col-lg-7 col-xl-6">
														<div class="order-total table-responsive ">
															<table class="table table-borderless text-right">
																<tbody>

																	<tr>
																		<td class="f-w-7 font-18">
																			<h4>Amount :</h4>
																		</td>
																		<td class="f-w-7 font-18">
																			<h4>${{cart.amount}}</h4>
																		</td>
																	</tr>
																</tbody>
															</table>
														</div>
													</div>
												</div>
											</div>
											<div class="cart-footer text-right">
												<button ng-click="cart.clear()" type="button" class="btn btn-danger my-1">Clear</button>
												<a th:href="@{/order/checkout}" class="btn btn-success my-1">Proceed to
													Checkout<i class="ri-arrow-right-line ml-2"></i></a>
											</div>
										</div>
										 <div class="cart-empty text-center" ng-if="cart.items.length === 0">
                                            <h4>No products in the cart</h4>
                                        </div>
									</div>
								</div>
							</div>
						</div>
						<!-- Start Purchase Form -->
						<div class="card m-b-30">
							<div class="card-header">
								<h5 class="card-title">Purchase Details</h5>
							</div>
							<div class="card-body">
								<div class="form-group">
									<label for="name">Name</label>
									<div class="form-control" id="username" >[[${#request.remoteUser}]]</div>
								</div>
								<div class="form-group">
									<label for="date">Date</label>
									<div class="form-control" id="date">{{order.createDate | date: 'dd-MM-yyyy'}}</div>
								</div>
									<div class="form-group">
										<label for="address">Address</label>
										<textarea ng-model="order.address" class="form-control" id="address" rows="3" placeholder="Enter your address"></textarea>
									</div>
									<button style="margin-top: 15px;" ng-click="order.purchase()" type="submit" class="btn btn-success">Submit</button>
							</div>
						</div>
						<!-- End Purchase Form -->
					</div>
					<!-- End col -->
				</div>
				<!-- End row -->
			</div>
		</div>

    </main>
  </body>
</html>
